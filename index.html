<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>Garvin 杂记</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    
    <meta name="keywords" content="">
    <meta property="og:type" content="website">
<meta property="og:title" content="Garvin 杂记">
<meta property="og:url" content="https://hjw541988478.github.io/index.html">
<meta property="og:site_name" content="Garvin 杂记">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Garvin 杂记">
    
        <link rel="alternate" type="application/atom+xml" title="Garvin 杂记" href="/atom.xml">
    
    <link rel="shortcut icon" href="/">
    <link rel="stylesheet" href="/css/style.css?v=1.7.2">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu"  >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Garvin</h5>
          <a href="mailto:undefined" class="mail">
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Garvin 杂记</div>
        
        
    </div>
</header>
<header class="content-header index-header">

    <div class="container fade-scale">
        <h1 class="title">Garvin 杂记</h1>
        <h5 class="subtitle">
            
                
            
        </h5>
    </div>

    


</header>

<div class="container body-wrap">

    <ul class="post-list">
    
        <li class="post-list-item fade">
            <article id="post-18-4Sum"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-08-19 00:08:56" datetime="2018-08-18T16:08:56.000Z"  itemprop="datePublished">2018-08-19</time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Leetcode/">Leetcode</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2018/08/18-4Sum/">18.4Sum</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        问题https://leetcode.com/problems/4sum/description/
Given an array nums of n integers and an integer target, are there elements a, b, c, and d in nums such that a + b + c + d = target? Find all unique quadruplets in the array which gives the sum of target.
Note:
The solution set must not contain duplicate quadruplets.
Example:
Given array nums = [1, 0, -1, 0, -2, 2], and target = 0.
A solution set is:[  [-1,  0, 0, 1],  [-2, -1, 1, 2],  [-2,  0, 0, 2]]
    

        <a href="/2018/08/18-4Sum/" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/3sum/">3sum</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-16-3Sum-Closet"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2018-08-19 00:03:56" datetime="2018-08-18T16:03:56.000Z"  itemprop="datePublished">2018-08-19</time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Leetcode/">Leetcode</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2018/08/16-3Sum-Closet/">16.3Sum Closet</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        问题https://leetcode.com/problems/3sum-closest/description/
Given an array nums of n integers and an integer target, find three integers in nums such that the sum is closest to target. Return the sum of the three integers. You may assume that each input would have exactly one solution.
Example:
Given array nums = [-1, 2, 1, -4], and target = 1.
The sum that is closest to the target is 2. (-1 + 2 + 1 = 2).
    

        <a href="/2018/08/16-3Sum-Closet/" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/3sum/">3sum</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TwoPointers/">TwoPointers</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-设计模式之单例模式"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2017-08-02 20:52:00" datetime="2017-08-02T12:52:00.000Z"  itemprop="datePublished">2017-08-02</time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/DesignPattern/">DesignPattern</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2017/08/设计模式之单例模式/">设计模式之单例模式</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        模式介绍模式定义确保某一个类只有一个实例，而且自行实例化并向整个系统提供这个实例。
使用场景确保某个类只有一个对象的场景，例如日志类，访问 IO 和数据库资源。
UML图
    

        <a href="/2017/08/设计模式之单例模式/" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DesignPattern/">DesignPattern</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Singleton/">Singleton</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-设计模式之七大基本原则"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2017-07-31 19:52:00" datetime="2017-07-31T11:52:00.000Z"  itemprop="datePublished">2017-07-31</time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/DesignPattern/">DesignPattern</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2017/07/设计模式之七大基本原则/">设计模式之七大基本原则</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        概述
    

        <a href="/2017/07/设计模式之七大基本原则/" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DesignPattern/">DesignPattern</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-SO库热修复探究-Part3"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2017-07-25 21:50:00" datetime="2017-07-25T13:50:00.000Z"  itemprop="datePublished">2017-07-25</time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Android/">Android</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2017/07/SO库热修复探究-Part3/">SO库热修复探究(Part3)</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        SO 库加载原理Java 提供两个接口加载 so 库：

System.loadLibrary(String libName)：参数为so库名称，位于 apk 压缩文件中的 libs 目录，最后复制到 apk 安装目录下；
System.load(String pathName)：参数为 so 库在磁盘中完整的路径，可以加载自定义外部 so 库文件；其实最终都会调用 nativeLoad 这个 native 方法，这个方法参数为 so 库在磁盘中完整路径名。在 JNI 编程中，动态注册的 native 方法必须实现 JNI_OnLoad 方法，同时实现一个 JNINativeMethod[ ] 数组，静态注册的 native 方法必须是 Java+类完整路径+方法名 的格式。
12native void test() -&gt;(JNI_OnLoad nativeMethods[] 匹配映射) -&gt; 动态注册 void test(env,jobject);native void test() -&gt;(1. test第一次执行dvmResolvedNativeCass 2. hashtable中查找匹配findMethodInLib) -&gt; 静态注册 void Java_包名_类名_test(env,jobject);

动态注册的 native 方法映射通过加载 so 库过程中调用 JNI_OnLoad 方法调用完成；

静态注册的 native 方法映射在 native 方法第一次执行的时候完成映射，当然前提是 so 库已经 load 过。
    

        <a href="/2017/07/SO库热修复探究-Part3/" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HotFix/">HotFix</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SoLibHotFix/">SoLibHotFix</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-资源热修复探究-Part2"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2017-07-21 21:43:00" datetime="2017-07-21T13:43:00.000Z"  itemprop="datePublished">2017-07-21</time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Android/">Android</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2017/07/资源热修复探究-Part2/">资源热修复探究(Part2)</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        资源热修复原理InstantRun分两步
构造新的 AssetManager，并反射调用 addAssetPath，把完整资源包加入到 AssetManager 中，这样得到一个含有所有新资源的 AssetManager；
找到所有之前引用到原有 AssetManager 地方，通过反射，把引用处替换为新的 AssetManager；addAssetPath 在 native 层由 c++ 实现，通过传入资源包路径，先得到 resources.arsc，然后解析它的格式，存放在底层的 AssetManager 的 mResources 成员中：1mutable ResTable* mResources;


mResources 是一个 ResTable 结构体，其成员 mPackageGroups 为资源包的实体，包含所有解析过的资源包的集合，任何一个资源包都含有 resources.arsc，它记录了所有资源 id 分配情况以及资源中的所有字符串，以二进制形式存储，底层的AssetManager就是用来解析这个文件，把相关信息存储到 mPackageGroups 中。
    

        <a href="/2017/07/资源热修复探究-Part2/" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HotFix/">HotFix</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ResourceHotFix/">ResourceHotFix</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-代码热修复探究-Part1"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2017-07-20 20:22:00" datetime="2017-07-20T12:22:00.000Z"  itemprop="datePublished">2017-07-20</time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Android/">Android</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2017/07/代码热修复探究-Part1/">代码热修复探究(Part1)</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        热修复技术介绍代码修复技术底层替换：已经加载的类直接替换原有方法，由于修改了原来的类，导致方法数的变化，索引无法正常工作，不稳定，可能产生无法预知的结果；类加载：在 app 重新启动后让 classloader 加载新的类，由于已加载的类无法卸载，于是不重启无法加载新类，在重启以后，赶在业务逻辑之前抢先加载补丁的新类，达到热修复的目的。市场主流方案选择：

QZoneFix：侵入打包流程，不优雅；
QFix：获取底层虚拟机函数，不稳定；
Tinker：全量dex加载，粒度过细，性能消耗过大；

资源修复
构造新的 AssetManager，反射调用 addAssetPath，把完整新资源包加入 AssetManager 中；
找到所有引用原 AssetManager 地方，通过反射，把引用处替换成新的。优点：


只使用一个 package id 为 0x66 的资源包，该包只包含了改变了资源，然后直接在原 AssetManager 中 addAssetPath；
不修改 AssetManager 引用处；
不必下发完整包；
不需要在运行时合成完整包；
    

        <a href="/2017/07/代码热修复探究-Part1/" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CodeHotFix/">CodeHotFix</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HoxFix/">HoxFix</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Android基础之Activity"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2017-07-13 19:52:00" datetime="2017-07-13T11:52:00.000Z"  itemprop="datePublished">2017-07-13</time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Android/">Android</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2017/07/Android基础之Activity/">Android基础之Activity</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        生命周期

onCreate：生命周期只调用一次，用于初始化、必要对象创建等；
onStart：界面完全不可见变为可见时调用；
onResume：界面可点击交互，不被顶层任何其他Activity遮挡，开始执行界面交互；
onPause：界面交互不可点击，部分可见，此时应该停止交互相关的耗资源操作；
onStop：界面完全不可见，保存重要数据，在被强杀时onDestroy不会被调用；
onDestroy：生命周期只会被调用一次，界面完全被销毁，用于释放资源等；
onRestart：界面onStop后重新被打开调用；
    

        <a href="/2017/07/Android基础之Activity/" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Activity/">Activity</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Java常用线程池理解"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2017-06-14 18:32:00" datetime="2017-06-14T10:32:00.000Z"  itemprop="datePublished">2017-06-14</time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Java/">Java</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2017/06/Java常用线程池理解/">Java常用线程池理解</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        why ？
创建和销毁线程伴随着系统开销，如果频繁创建销毁线程，影响处理效率；（创建时间T1，执行任务T2，销毁T3。如果T1+T3&gt;T2，那就划不来）
线程并发数量过多，抢占系统资源导致阻塞；（线程共享系统资源，如果同时执行线程过多，导致系统资源不多而产生阻塞）
能对线程进行简单管理；（延时执行，定时循环执行）
    

        <a href="/2017/06/Java常用线程池理解/" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MultiThread/">MultiThread</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ThreadPool/">ThreadPool</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-Android插件化原理探索"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2017-05-16 22:01:00" datetime="2017-05-16T14:01:00.000Z"  itemprop="datePublished">2017-05-16</time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Android/">Android</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2017/05/Android插件化原理探索/">Android插件化原理探索</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        代理模式（委托模式）限制对象的直接访问，保护内部对象；
静态代理AIDL中asInterface方法中有应用到静态代理，如果不在同一进程就会返回Proxy对象，而且几乎所有系统服务采用代理模式。
动态代理运行时指定代理类，实现InvocationHandler接口，重写invoke方法，通过Proxy.newInstance返回代理对象。分为jdk动态代理和cglib动态代理；

jdk动态代理：基于类的反射机制，而且目标类基于同一的接口，Java 的继承机制注定了这些动态代理类们无法实现对 class 的动态代理；
cglib动态代理：借助asm实现，没有jdk动态代理的限制；
    

        <a href="/2017/05/Android插件化原理探索/" class="post-more waves-effect waves-button">
            阅读全文…
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AIDL/">AIDL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MultiProcess/">MultiProcess</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/插件化/">插件化</a></li></ul>

    </div>
    
</article>

        </li>
    
    </ul>

    
<nav id="page-nav">
    <div class="inner">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">下一页</a>
    </div>
</nav>


</div>

        <footer class="footer">
    <div class="top">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Garvin &copy; 2018</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>


    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: , REWARD: false };


</script>

<script src="/js/main.min.js?v=1.7.2"></script>










</body>
</html>
